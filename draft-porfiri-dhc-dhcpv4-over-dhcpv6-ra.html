<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>DHCPv4-over-DHCPv6 (DHCP 4o6) with Relay Agent Support</title>
<meta content="Claudio Porfiri" name="author">
<meta content="Suresh Krishnan" name="author">
<meta content="Jari Arkko" name="author">
<meta content="Mirja KÃ¼hlewind" name="author">
<meta content="
       This document describes a mechanism for networks
with legacy IPv4-only clients to use services provided by
DHCPv6 using DHCPv4-over-DHCPv6 (DHCP 4o6) in a Relay Agent.
RFC7341 specifies use of DHCPv4-over-DHCPv6 in the client only.
This document specifies
a RFC7341-based approach that allows DHCP 4o6 to be deployed as a
Relay Agent (4o6RA) that implements the 4o6 DHCP encapsulation
and decapsulation in contexts where it is not possible at the client. 
    " name="description">
<meta content="xml2rfc 3.25.0" name="generator">
<meta content="dhcp" name="keyword">
<meta content="draft-porfiri-dhc-dhcpv4-over-dhcpv6-ra-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.25.0
    Python 3.12.7
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 5.3.0
    platformdirs 4.3.6
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-porfiri-dhc-dhcpv4-over-dhcpv6-ra.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: italic;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C8A, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0301, U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-greek.woff2') format('woff2');
  unicode-range: U+0370-0377, U+037A-037F, U+0384-038A, U+038C, U+038E-03A1, U+03A3-03FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304, U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB, U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Sofia Sans Semi Condensed';
  font-style: normal;
  font-weight: 1 1000;
  src: url('https://martinthomson.github.io/rfc-css/fonts/sofiasanssemicondensed-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  --font-title: "Sofia Sans Semi Condensed", sans-serif;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
section {
  clear: both;
}
.section-number {
  padding-right: 0.5em;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-title);
  font-weight: 680;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
  vertical-align: top;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
  & :is(ol, ul) {
    margin-left: 1em;
  }
}
li {
  margin: 0 0 0.25em 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
  & li {
    margin-top: 0.5em;
  }
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  margin: 0 0 0 2em;
  & li {
    margin: 0;
    & :first-child { margin-top: 0; }
    & :last-child { margin-bottom: 0; }
  }
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
  &.olPercent {
    --indent: 5ch;
    & > dt {
      min-width: calc(var(--indent) - 2ch);
    }
  }
  &.olPercent > dt {
    float: none;
  }

  dl > dd > & {
    margin-top: 0.5em;
    margin-bottom: 0;
  }
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
  & > :is(:first-child, .break:first-child + *) {
    margin-top: 0;
  }
  & > :is(:last-child) {
    margin-bottom: 0;
  }
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
  caption-side: bottom;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: auto;
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
  &[href] {
    color: var(--pilcrow-weak);
    &:hover { text-decoration: none; }
  }
}
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
  & dt {
    width: var(--identifier-width);
    min-width: var(--identifier-width);
    clear: left;
    float: left;
    text-align: right;
    margin-right: 1ch;
  }
  & dd {
    margin: 0;
    margin-left: calc(1em + var(--identifier-width)) !important;
    min-width: 5em;
  }
  & .authors {
    & .author {
      display: inline-block;
      margin-right: 1.5em;
    }
    & .org {
      font-style: italic;
    }
  }
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;

  & nav {
    & ul {
      margin: 0 0.5em 0 0;
      padding: 0;
      list-style: none;
    }
    & li {
      line-height: 1.3em;
      margin: 2px 0;
      padding-left: 1.2em;
      text-indent: -1.2em;
    }
  }
  & a.xref {
    white-space: normal;
  }
}

.references {
  & > dt {
    text-align: right;
    font-weight: bold;
    min-width: 10ch;
    margin-right: 1.5ch;
    &:target::before {
      content: "â";
      margin: 0 10px 0 -25px;
    }
  }
  & > dd {
    margin-left: 12ch !important;
    overflow: visible;
    & .refInstance {
      margin-bottom: 0.8em;
    }
    & .ascii {
      margin-bottom: 0.25em;
    }
  }
}

#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  max-width: 20em;
  margin: 1em auto 1em 0;

  & .nameRole {
    font-weight: 700;
    margin-left: 0;
  }
  & .label {
    margin: 0.5em 0;
  }
  & .type {
    display: none;
  }
  & .alternative-contact {
    margin: 0.5em 0 0.25em 0;
  }
  & .non-ascii {
    margin: 0 0 0 2em;
  }
  & div.left {
    text-align: left;
  }
  & div.right {
    text-align: right;
  }
}

hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

/* Comments */
.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}

@media screen {
  #toc nav {
    font-family: var(--font-title);
    font-weight: 360;
    & > ul { margin-bottom: 2em; }
    & ul {
      margin: 0 0 0 4px;
      & :is(p, li) {
        margin: 2px 0;
      }
    }
  }
  #toc a.toplink {
    float: right;
  }
}
@media not screen {
  #toc a.toplink {
    display: none;
  }
}


/* TOC layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
    &::before { /* css hamburger */
      float: right;
      position: relative;
      width: 1em;
      height: 1px;
      left: -164px;
      margin: 8px 0 0 0;
      background: white none repeat scroll 0 0;
      box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
      content: "";
    }
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active {
    opacity: 1;
    & nav { display: block; }
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:is(:link, :focus, :hover),
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin: 2px 0.5em 0;
  }
}

/* TOC layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
  #toc a.toplink {
    margin: 8px 0.5em 0;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DCHP 4o6 Relay Agent</td>
<td class="right">December 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Porfiri, et al.</td>
<td class="center">Expires 8 June 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Dynamic Host Configuration</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-porfiri-dhc-dhcpv4-over-dhcpv6-ra-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-12-05" class="published">5 December 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-06-08">8 June 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">C. Porfiri</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">S. Krishnan</div>
<div class="org">Cisco</div>
</div>
<div class="author">
      <div class="author-name">J. Arkko</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">M. KÃ¼hlewind</div>
<div class="org">Ericsson</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">DHCPv4-over-DHCPv6 (DHCP 4o6) with Relay Agent Support</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a mechanism for networks
with legacy IPv4-only clients to use services provided by
DHCPv6 using DHCPv4-over-DHCPv6 (DHCP 4o6) in a Relay Agent.
RFC7341 specifies use of DHCPv4-over-DHCPv6 in the client only.
This document specifies
a RFC7341-based approach that allows DHCP 4o6 to be deployed as a
Relay Agent (4o6RA) that implements the 4o6 DHCP encapsulation
and decapsulation in contexts where it is not possible at the client.<a href="#section-abstract-1" class="pilcrow">Â¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">Â¶</a></p>
<p id="section-note.1-2">
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-porfiri-dhc-dhcpv4-over-dhcpv6-ra/">https://datatracker.ietf.org/doc/draft-porfiri-dhc-dhcpv4-over-dhcpv6-ra/</a></span>.<a href="#section-note.1-2" class="pilcrow">Â¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/mirjak/dhc-dhcpv4-over-dhcpv6-ra">https://github.com/mirjak/dhc-dhcpv4-over-dhcpv6-ra</a></span>.<a href="#section-note.1-3" class="pilcrow">Â¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 June 2025.<a href="#section-boilerplate.1-4" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">Â¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">â²</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.Â Â <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.Â Â <a href="#name-applicability-scope" class="internal xref">Applicability Scope</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.Â Â <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.Â Â <a href="#name-dhcpv4-over-dhcpv6-relay-ag" class="internal xref">DHCPv4 over DHCPv6 Relay Agent (4o6RA)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.Â Â <a href="#name-intermediate-relays" class="internal xref">Intermediate relays</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.Â Â <a href="#name-4o6ra-and-topology-discover" class="internal xref">4o6RA and Topology Discovery</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.Â Â <a href="#name-deployment-considerations" class="internal xref">Deployment Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.Â Â <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.Â Â <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.Â Â <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.Â Â <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.Â Â <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.Â Â <a href="#name-example-use-case-topology-d" class="internal xref">Example Use Case: Topology Discovery for IPv4-only Radio Unit in the RAN Switched Fronthaul</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1"><span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> describes a transport mechanism for carrying DHCPv4 <span>[<a href="#RFC2131" class="cite xref">RFC2131</a>]</span>
messages using DHCPv6 <span>[<a href="#RFC8415" class="cite xref">RFC8415</a>]</span> for the dynamic provisioning
of IPv4 addresses and other DHCPv4 specific configuration parameters
across IPv6-only networks. The deployment of <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> requires support in
DHCP clients and at the DHCPv6 server.<a href="#section-1-1" class="pilcrow">Â¶</a></p>
<p id="section-1-2">However, if a client is embedded in a host that only supports IPv4 and cannot
easily be replaced or updated due to a number of technical or business reasons,
this approach does not work.<a href="#section-1-2" class="pilcrow">Â¶</a></p>
<p id="section-1-3">Similarly, the specifications for DHCPv6 Relay Agents such as LDRA <span>[<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>
or L3RA <span>[<a href="#RFC8415" class="cite xref">RFC8415</a>]</span> do not foresee the possibility to handle legacy DHCPv4,
other than implementing DHCP 4o6 in the client.<a href="#section-1-3" class="pilcrow">Â¶</a></p>
<p id="section-1-4">This document specifies an <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>-based solution that can be
implemented in intermediate nodes such as switches or routers,
without putting any requirements on clients. No new protocols or extensions are needed,
instead this document specifies an amendment to <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> that allows
a Relay Agent to perform the DHCP 4o6 encapsulation and decapsultion instead of
the client.<a href="#section-1-4" class="pilcrow">Â¶</a></p>
<div id="applicability">
<section id="section-1.1">
        <h3 id="name-applicability-scope">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-applicability-scope" class="section-name selfRef">Applicability Scope</a>
        </h3>
<p id="section-1.1-1">The mechanisms described in this document apply to the configuration phase
of the host, specifically when a DHCP server for IPv4 <span>[<a href="#RFC2131" class="cite xref">RFC2131</a>]</span> is not
reacheable directly from the host, the host needs to receive an IPv4 address
and there's a DHCPv6 server than can provide IPv4 addresses by means of
the mechanisms described in <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> and the host doesn't implement
a DHCP client conform to <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> itself.<a href="#section-1.1-1" class="pilcrow">Â¶</a></p>
</section>
</div>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The following terms and acronyms are used in this document:<a href="#section-2-1" class="pilcrow">Â¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">
          <p id="section-2-2.1.1">DHCP:
 In this document when not otherwise specified it referres to DHCPv4 and/or DHCPv6<a href="#section-2-2.1.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="section-2-2.2">
          <p id="section-2-2.2.1">DHCPv4:
 DHCP as defined in <span>[<a href="#RFC2131" class="cite xref">RFC2131</a>]</span><a href="#section-2-2.2.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="section-2-2.3">
          <p id="section-2-2.3.1">DHCPv4 over DHCPv6 (or 4o6):
 The architecture, the procedures and the protocols described in the
 DHCPv4-over-DHCPv6 document <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>.<a href="#section-2-2.3.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="section-2-2.4">
          <p id="section-2-2.4.1">DHCP Relay Agent:
 This is a concept in all of the protocols, BOOTP <span>[<a href="#RFC0951" class="cite xref">RFC0951</a>]</span> <span>[<a href="#RFC1542" class="cite xref">RFC1542</a>]</span>, DHCPv4
 <span>[<a href="#RFC2131" class="cite xref">RFC2131</a>]</span> <span>[<a href="#RFC2132" class="cite xref">RFC2132</a>]</span>, and DHCPv6 <span>[<a href="#RFC8415" class="cite xref">RFC8415</a>]</span>, although the details differ
 between the protocols.<a href="#section-2-2.4.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="section-2-2.5">
          <p id="section-2-2.5.1">Lightweight DHCPv6 Relay Agent (or LDRA):
 This is an extension of the original DHCPv6 Relay Agent,
 to support also Layer 2 devices performing a Relay Agent function <span>[<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>.<a href="#section-2-2.5.1" class="pilcrow">Â¶</a></p>
</li>
        <li class="normal" id="section-2-2.6">
          <p id="section-2-2.6.1">DHCPv4 over DHCPv6 Relay Agent (or 4o6RA):
 Refers to a Relay Agent that implements the 4o6
 specified in this document.<a href="#section-2-2.6.1" class="pilcrow">Â¶</a></p>
</li>
      </ul>
<p id="section-2-3">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCPÂ 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="dhcpv4-over-dhcpv6-relay-agent-4o6ra">
<section id="section-3">
      <h2 id="name-dhcpv4-over-dhcpv6-relay-ag">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-dhcpv4-over-dhcpv6-relay-ag" class="section-name selfRef">DHCPv4 over DHCPv6 Relay Agent (4o6RA)</a>
      </h2>
<p id="section-3-1">This document assumes a network, where IPv4-only hosts are connected
to a network that supports IPv6 and limited IPv4 services.<a href="#section-3-1" class="pilcrow">Â¶</a></p>
<p id="section-3-2">To address such a network setup, this document extends
DHCPv6 Relay Agents with  DHCPv4-over-DHCPv6, as
shown in <a href="#fig_4o6RA" class="auto internal xref">Figure 1</a>.<a href="#section-3-2" class="pilcrow">Â¶</a></p>
<span id="name-architecture-example-with-l"></span><div id="fig_4o6RA">
<figure id="figure-1">
        <div id="section-3-3.1">
          <div class="alignCenter art-svg artwork" id="section-3-3.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="480" viewBox="0 0 480 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 8,64 L 8,128" fill="none" stroke="black"></path>
              <path d="M 80,48 L 80,64" fill="none" stroke="black"></path>
              <path d="M 80,128 L 80,144" fill="none" stroke="black"></path>
              <path d="M 96,64 L 96,128" fill="none" stroke="black"></path>
              <path d="M 176,64 L 176,128" fill="none" stroke="black"></path>
              <path d="M 192,48 L 192,64" fill="none" stroke="black"></path>
              <path d="M 192,128 L 192,144" fill="none" stroke="black"></path>
              <path d="M 288,48 L 288,64" fill="none" stroke="black"></path>
              <path d="M 288,128 L 288,144" fill="none" stroke="black"></path>
              <path d="M 304,64 L 304,128" fill="none" stroke="black"></path>
              <path d="M 384,64 L 384,128" fill="none" stroke="black"></path>
              <path d="M 400,48 L 400,64" fill="none" stroke="black"></path>
              <path d="M 400,128 L 400,144" fill="none" stroke="black"></path>
              <path d="M 472,64 L 472,128" fill="none" stroke="black"></path>
              <path d="M 96,32 L 176,32" fill="none" stroke="black"></path>
              <path d="M 304,32 L 384,32" fill="none" stroke="black"></path>
              <path d="M 8,64 L 96,64" fill="none" stroke="black"></path>
              <path d="M 176,64 L 304,64" fill="none" stroke="black"></path>
              <path d="M 384,64 L 472,64" fill="none" stroke="black"></path>
              <path d="M 96,96 L 176,96" fill="none" stroke="black"></path>
              <path d="M 304,96 L 384,96" fill="none" stroke="black"></path>
              <path d="M 8,128 L 96,128" fill="none" stroke="black"></path>
              <path d="M 176,128 L 304,128" fill="none" stroke="black"></path>
              <path d="M 384,128 L 472,128" fill="none" stroke="black"></path>
              <path d="M 96,160 L 176,160" fill="none" stroke="black"></path>
              <path d="M 304,160 L 384,160" fill="none" stroke="black"></path>
              <path d="M 96,32 C 87.16936,32 80,39.16936 80,48" fill="none" stroke="black"></path>
              <path d="M 176,32 C 184.83064,32 192,39.16936 192,48" fill="none" stroke="black"></path>
              <path d="M 304,32 C 295.16936,32 288,39.16936 288,48" fill="none" stroke="black"></path>
              <path d="M 384,32 C 392.83064,32 400,39.16936 400,48" fill="none" stroke="black"></path>
              <path d="M 96,160 C 87.16936,160 80,152.83064 80,144" fill="none" stroke="black"></path>
              <path d="M 176,160 C 184.83064,160 192,152.83064 192,144" fill="none" stroke="black"></path>
              <path d="M 304,160 C 295.16936,160 288,152.83064 288,144" fill="none" stroke="black"></path>
              <path d="M 384,160 C 392.83064,160 400,152.83064 400,144" fill="none" stroke="black"></path>
              <g class="text">
                <text x="140" y="68">L2</text>
                <text x="340" y="68">IPv6</text>
                <text x="52" y="84">DHCPv4</text>
                <text x="136" y="84">Network</text>
                <text x="236" y="84">DHCPv6</text>
                <text x="344" y="84">Network</text>
                <text x="412" y="84">DHCP</text>
                <text x="448" y="84">4o6</text>
                <text x="52" y="100">Client</text>
                <text x="216" y="100">Relay</text>
                <text x="264" y="100">Agent</text>
                <text x="428" y="100">Server</text>
                <text x="220" y="116">with</text>
                <text x="264" y="116">4o6RA</text>
              </g>
            </svg><a href="#section-3-3.1.1" class="pilcrow">Â¶</a>
</div>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-architecture-example-with-l" class="selfRef">Architecture Example with Legacy DHCP Client</a>
        </figcaption></figure>
</div>
<p id="section-3-4">This document specifies the encapsulation
and decapsulation described in <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> to be performed in the Relay Agent
whereas the DHCPv4 client does not require any change.
In this case it is up to the Relay Agent to provide the full DHCP
4o6 support whereas a legacy client is not aware of being served
via a DHCP 4o6 service.
All prerequisites and configuration that apply to the DHCP client in
<span><a href="https://rfc-editor.org/rfc/rfc7341#section-5" class="relref">Section 5</a> of [<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> shall be applied to 4o6RA instead.<a href="#section-3-4" class="pilcrow">Â¶</a></p>
<p id="section-3-5"><span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> specifies that before applying for an IPv4 address via a
DHCPv4-query message, the client must identify a suitable network interface
for the address. In the case described in this document where the
client functionality described in <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> is replaced by 4o6RA,
it is 4o6RA that shall also identify a suitable interface, that can be
a network interface or another Relay Agent.<a href="#section-3-5" class="pilcrow">Â¶</a></p>
<p id="section-3-6">To maintain interoperability with existing DHCPv6 relays and servers,
the message format is unchanged from <span>[<a href="#RFC8415" class="cite xref">RFC8415</a>]</span>. The 4o6RA implements
the same message types as a normal DHCPv6 Relay Agent <span><a href="https://rfc-editor.org/rfc/rfc7341#section-6" class="relref">Section 6</a> of [<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>.<a href="#section-3-6" class="pilcrow">Â¶</a></p>
<p id="section-3-7">In this specification, the 4o6RA creates the DHCPV4-QUERY Message
and encapsulates the DHCP request message received from the legacy DHCPv4 client.<a href="#section-3-7" class="pilcrow">Â¶</a></p>
<p id="section-3-8">When DHCPV4-RESPONSE Message is received by the 4o6 Relay Agent,
it looks for the DHCPv4 Message option within this message.
If this option is not found, the DHCPv4-response message <span class="bcp14">MUST</span> be discarded.
If the DHCPv4 Message option is present, the 4o6RA <span class="bcp14">MUST</span> extract the DHCPv4
message and forward the encapsulated DHCPv4-response to the requesting DHCPv4 client.<a href="#section-3-8" class="pilcrow">Â¶</a></p>
<p id="section-3-9">Layer 2 Relay Agents receiving DHCPV4-QUERY or DHCPV4-RESPONSE messages
are expected to handle them as specified in <span><a href="https://rfc-editor.org/rfc/rfc6221#section-6" class="relref">Section 6</a> of [<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>.<a href="#section-3-9" class="pilcrow">Â¶</a></p>
<p id="section-3-10">DHCPv6 servers must be compliant with 4o6 according to <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>.
No additional requirements on DHCPv6 servers are set by this specification.<a href="#section-3-10" class="pilcrow">Â¶</a></p>
<div id="intermediate-relays">
<section id="section-3.1">
        <h3 id="name-intermediate-relays">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-intermediate-relays" class="section-name selfRef">Intermediate relays</a>
        </h3>
<p id="section-3.1-1">Intermediate relays shall behave according to section 10 of <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>.<a href="#section-3.1-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="topology_considerations">
<section id="section-3.2">
        <h3 id="name-4o6ra-and-topology-discover">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-4o6ra-and-topology-discover" class="section-name selfRef">4o6RA and Topology Discovery</a>
        </h3>
<p id="section-3.2-1">In some networks the configuration of a host may depend on the
topology.  However, when the new host attaches to a
network, it may be unaware of the topology and respectively how it
has to be configured.<a href="#section-3.2-1" class="pilcrow">Â¶</a></p>
<p id="section-3.2-2">DHCPv4 <span>[<a href="#RFC2131" class="cite xref">RFC2131</a>]</span> and DHCPv6 <span>[<a href="#RFC3315" class="cite xref">RFC3315</a>]</span> specifications
describe how addresses can be allocated to clients based on network
topology information provided by a DHCP relay, typically.<a href="#section-3.2-2" class="pilcrow">Â¶</a></p>
<p id="section-3.2-3">Address/prefix allocation decisions are integral to the allocation of
addresses and prefixes in DHCP. The argument is described in details
in <span>[<a href="#RFC7969" class="cite xref">RFC7969</a>]</span>, here we want to guarantee that 4o6RA does not
break any legacy capability when related to the use of topology.<a href="#section-3.2-3" class="pilcrow">Â¶</a></p>
<p id="section-3.2-4">The topology discovery as described in <span>[<a href="#RFC7969" class="cite xref">RFC7969</a>]</span> differs between
IPv4 and IPv6 because for IPv4 it is only the first Relay Agent that can
set the giaddr field (section 3.1 of <span>[<a href="#RFC7969" class="cite xref">RFC7969</a>]</span>). Thus in a generic
network involving more than one Relay Agent only part of the topology
is transported via DHCPv4.<a href="#section-3.2-4" class="pilcrow">Â¶</a></p>
<p id="section-3.2-5">When in IPv6 context and using DHCPv6, all Relay Agents can send
link-address and Interface-ID options, that provide
information about the complete path
between the DHCPv6 client and the DHCPv6 server to the DHCPv6 server.
When in a L2 network, Lightway DHCPv6 Relay Agents <span>[<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>
can be used. Then, topology information for the given IP address
can be obtained from the DHCPv6 server and used for configuration
or other purposes.<a href="#section-3.2-5" class="pilcrow">Â¶</a></p>
<p id="section-3.2-6">The adoption of <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> at the client permits to use the DHCPv6
mechanisms for topology discovery even in case of DHCPv4.
as using DHCPv6 encapsulation the DHCPv6 Relay Agent knows
the interface where the encapsulated DHCP request is received.<a href="#section-3.2-6" class="pilcrow">Â¶</a></p>
<p id="section-3.2-7">Moving 4o6 in the intermediate node rather than at the client breaks
the topology propagation as 4o6RA-only does not provide any interface
information in the encapsulated message.<a href="#section-3.2-7" class="pilcrow">Â¶</a></p>
<span id="name-topology-broken-path"></span><div id="fig_4o6RA_RA">
<figure id="figure-2">
          <div id="section-3.2-8.1">
            <div class="alignCenter art-svg artwork" id="section-3.2-8.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="528" viewBox="0 0 528 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,64 L 8,128" fill="none" stroke="black"></path>
                <path d="M 80,48 L 80,64" fill="none" stroke="black"></path>
                <path d="M 80,128 L 80,144" fill="none" stroke="black"></path>
                <path d="M 96,64 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,64 L 176,128" fill="none" stroke="black"></path>
                <path d="M 192,48 L 192,64" fill="none" stroke="black"></path>
                <path d="M 192,128 L 192,144" fill="none" stroke="black"></path>
                <path d="M 224,48 L 224,64" fill="none" stroke="black"></path>
                <path d="M 224,128 L 224,144" fill="none" stroke="black"></path>
                <path d="M 256,64 L 256,128" fill="none" stroke="black"></path>
                <path d="M 296,64 L 296,128" fill="none" stroke="black"></path>
                <path d="M 368,64 L 368,128" fill="none" stroke="black"></path>
                <path d="M 432,64 L 432,128" fill="none" stroke="black"></path>
                <path d="M 448,48 L 448,64" fill="none" stroke="black"></path>
                <path d="M 448,128 L 448,144" fill="none" stroke="black"></path>
                <path d="M 520,64 L 520,128" fill="none" stroke="black"></path>
                <path d="M 96,32 L 176,32" fill="none" stroke="black"></path>
                <path d="M 240,32 L 432,32" fill="none" stroke="black"></path>
                <path d="M 8,64 L 96,64" fill="none" stroke="black"></path>
                <path d="M 176,64 L 256,64" fill="none" stroke="black"></path>
                <path d="M 296,64 L 368,64" fill="none" stroke="black"></path>
                <path d="M 432,64 L 520,64" fill="none" stroke="black"></path>
                <path d="M 96,96 L 176,96" fill="none" stroke="black"></path>
                <path d="M 256,96 L 296,96" fill="none" stroke="black"></path>
                <path d="M 368,96 L 432,96" fill="none" stroke="black"></path>
                <path d="M 8,128 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,128 L 256,128" fill="none" stroke="black"></path>
                <path d="M 296,128 L 368,128" fill="none" stroke="black"></path>
                <path d="M 432,128 L 520,128" fill="none" stroke="black"></path>
                <path d="M 96,160 L 176,160" fill="none" stroke="black"></path>
                <path d="M 240,160 L 432,160" fill="none" stroke="black"></path>
                <path d="M 96,32 C 87.16936,32 80,39.16936 80,48" fill="none" stroke="black"></path>
                <path d="M 176,32 C 184.83064,32 192,39.16936 192,48" fill="none" stroke="black"></path>
                <path d="M 240,32 C 231.16936,32 224,39.16936 224,48" fill="none" stroke="black"></path>
                <path d="M 432,32 C 440.83064,32 448,39.16936 448,48" fill="none" stroke="black"></path>
                <path d="M 96,160 C 87.16936,160 80,152.83064 80,144" fill="none" stroke="black"></path>
                <path d="M 176,160 C 184.83064,160 192,152.83064 192,144" fill="none" stroke="black"></path>
                <path d="M 240,160 C 231.16936,160 224,152.83064 224,144" fill="none" stroke="black"></path>
                <path d="M 432,160 C 440.83064,160 448,152.83064 448,144" fill="none" stroke="black"></path>
                <g class="text">
                  <text x="100" y="52">L2</text>
                  <text x="144" y="52">Network</text>
                  <text x="308" y="52">IPv6</text>
                  <text x="360" y="52">Network</text>
                  <text x="52" y="84">DHCPv4</text>
                  <text x="208" y="84">4o6</text>
                  <text x="332" y="84">DHCPv6</text>
                  <text x="460" y="84">DHCP</text>
                  <text x="496" y="84">4o6</text>
                  <text x="52" y="100">Client</text>
                  <text x="216" y="100">Relay</text>
                  <text x="328" y="100">Relay</text>
                  <text x="476" y="100">Server</text>
                  <text x="216" y="116">Agent</text>
                  <text x="328" y="116">Agent</text>
                </g>
              </svg><a href="#section-3.2-8.1.1" class="pilcrow">Â¶</a>
</div>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-topology-broken-path" class="selfRef">Topology broken path</a>
          </figcaption></figure>
</div>
<p id="section-3.2-9">As shown in <a href="#fig_4o6RA_RA" class="auto internal xref">Figure 2</a>, the introduction of 4o6 at the
edge of the IPv6 network hides the L2 network from the DHCPv6 RA.<a href="#section-3.2-9" class="pilcrow">Â¶</a></p>
<p id="section-3.2-10">In order to preserve the topology information, it is recommended that the
implementation of 4o6RA is combined with the implementation of LDRA <span>[<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>
and that the implementation has a mechanism for LDRA to get interface information
that can be used for the Interface-ID option, as specified in
<span><a href="https://rfc-editor.org/rfc/rfc6221#section-5.3.2" class="relref">Section 5.3.2</a> of [<a href="#RFC6221" class="cite xref">RFC6221</a>]</span>.
The internal mechanisms to exchange interface information,
their format and whether the interface information contains an indication that a 4o6RA
is involved are out of the scope for this document.<a href="#section-3.2-10" class="pilcrow">Â¶</a></p>
<span id="name-topology-path-preserved-wit"></span><div id="fig_4o6LDRA">
<figure id="figure-3">
          <div id="section-3.2-11.1">
            <div class="alignCenter art-svg artwork" id="section-3.2-11.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="480" viewBox="0 0 480 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,64 L 8,128" fill="none" stroke="black"></path>
                <path d="M 80,48 L 80,64" fill="none" stroke="black"></path>
                <path d="M 80,128 L 80,144" fill="none" stroke="black"></path>
                <path d="M 96,64 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,64 L 176,128" fill="none" stroke="black"></path>
                <path d="M 192,48 L 192,64" fill="none" stroke="black"></path>
                <path d="M 192,128 L 192,144" fill="none" stroke="black"></path>
                <path d="M 224,48 L 224,64" fill="none" stroke="black"></path>
                <path d="M 224,128 L 224,144" fill="none" stroke="black"></path>
                <path d="M 248,64 L 248,128" fill="none" stroke="black"></path>
                <path d="M 328,64 L 328,128" fill="none" stroke="black"></path>
                <path d="M 384,64 L 384,128" fill="none" stroke="black"></path>
                <path d="M 464,48 L 464,56" fill="none" stroke="black"></path>
                <path d="M 464,136 L 464,144" fill="none" stroke="black"></path>
                <path d="M 472,64 L 472,128" fill="none" stroke="black"></path>
                <path d="M 96,32 L 176,32" fill="none" stroke="black"></path>
                <path d="M 240,32 L 448,32" fill="none" stroke="black"></path>
                <path d="M 8,64 L 96,64" fill="none" stroke="black"></path>
                <path d="M 176,64 L 328,64" fill="none" stroke="black"></path>
                <path d="M 384,64 L 472,64" fill="none" stroke="black"></path>
                <path d="M 96,96 L 176,96" fill="none" stroke="black"></path>
                <path d="M 328,96 L 384,96" fill="none" stroke="black"></path>
                <path d="M 8,128 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,128 L 328,128" fill="none" stroke="black"></path>
                <path d="M 384,128 L 472,128" fill="none" stroke="black"></path>
                <path d="M 96,160 L 176,160" fill="none" stroke="black"></path>
                <path d="M 240,160 L 448,160" fill="none" stroke="black"></path>
                <path d="M 96,32 C 87.16936,32 80,39.16936 80,48" fill="none" stroke="black"></path>
                <path d="M 176,32 C 184.83064,32 192,39.16936 192,48" fill="none" stroke="black"></path>
                <path d="M 240,32 C 231.16936,32 224,39.16936 224,48" fill="none" stroke="black"></path>
                <path d="M 448,32 C 456.83064,32 464,39.16936 464,48" fill="none" stroke="black"></path>
                <path d="M 96,160 C 87.16936,160 80,152.83064 80,144" fill="none" stroke="black"></path>
                <path d="M 176,160 C 184.83064,160 192,152.83064 192,144" fill="none" stroke="black"></path>
                <path d="M 240,160 C 231.16936,160 224,152.83064 224,144" fill="none" stroke="black"></path>
                <path d="M 448,160 C 456.83064,160 464,152.83064 464,144" fill="none" stroke="black"></path>
                <g class="text">
                  <text x="100" y="52">L2</text>
                  <text x="144" y="52">Network</text>
                  <text x="324" y="52">IPv6</text>
                  <text x="376" y="52">Network</text>
                  <text x="52" y="84">DHCPv4</text>
                  <text x="208" y="84">4o6</text>
                  <text x="284" y="84">LDRA</text>
                  <text x="412" y="84">DHCP</text>
                  <text x="448" y="84">4o6</text>
                  <text x="52" y="100">Client</text>
                  <text x="216" y="100">Relay</text>
                  <text x="288" y="100">RFC6221</text>
                  <text x="428" y="100">Server</text>
                  <text x="216" y="116">Agent</text>
                </g>
              </svg><a href="#section-3.2-11.1.1" class="pilcrow">Â¶</a>
</div>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-topology-path-preserved-wit" class="selfRef">Topology path preserved with LDRA</a>
          </figcaption></figure>
</div>
<p id="section-3.2-12">The assumed architecture is shown in <a href="#fig_4o6LDRA" class="auto internal xref">Figure 3</a> where the whole
The Relay Agent is built up with cooperating 4o6RA and LDRA, and an internal interface to
propagate topology information from 4o6RA to LDRA.<a href="#section-3.2-12" class="pilcrow">Â¶</a></p>
<p id="section-3.2-13">In a simple case, where the same node hosts the 4o6RA and the DHCP4o6 server,
it might be enough to only use 4o6RA, as shown in <a href="#fig_4o6RAserver" class="auto internal xref">Figure 4</a>.<a href="#section-3.2-13" class="pilcrow">Â¶</a></p>
<span id="name-topology-path-preserved-4o6"></span><div id="fig_4o6RAserver">
<figure id="figure-4">
          <div id="section-3.2-14.1">
            <div class="alignCenter art-svg artwork" id="section-3.2-14.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="208" width="344" viewBox="0 0 344 208" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
                <path d="M 8,64 L 8,128" fill="none" stroke="black"></path>
                <path d="M 80,48 L 80,64" fill="none" stroke="black"></path>
                <path d="M 80,128 L 80,144" fill="none" stroke="black"></path>
                <path d="M 96,64 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,64 L 176,128" fill="none" stroke="black"></path>
                <path d="M 192,48 L 192,64" fill="none" stroke="black"></path>
                <path d="M 192,128 L 192,144" fill="none" stroke="black"></path>
                <path d="M 248,64 L 248,128" fill="none" stroke="black"></path>
                <path d="M 336,64 L 336,128" fill="none" stroke="black"></path>
                <path d="M 96,32 L 176,32" fill="none" stroke="black"></path>
                <path d="M 8,64 L 96,64" fill="none" stroke="black"></path>
                <path d="M 176,64 L 336,64" fill="none" stroke="black"></path>
                <path d="M 96,96 L 176,96" fill="none" stroke="black"></path>
                <path d="M 8,128 L 96,128" fill="none" stroke="black"></path>
                <path d="M 176,128 L 336,128" fill="none" stroke="black"></path>
                <path d="M 96,160 L 176,160" fill="none" stroke="black"></path>
                <path d="M 96,32 C 87.16936,32 80,39.16936 80,48" fill="none" stroke="black"></path>
                <path d="M 176,32 C 184.83064,32 192,39.16936 192,48" fill="none" stroke="black"></path>
                <path d="M 96,160 C 87.16936,160 80,152.83064 80,144" fill="none" stroke="black"></path>
                <path d="M 176,160 C 184.83064,160 192,152.83064 192,144" fill="none" stroke="black"></path>
                <g class="text">
                  <text x="100" y="52">L2</text>
                  <text x="144" y="52">Network</text>
                  <text x="52" y="84">DHCP</text>
                  <text x="208" y="84">4o6</text>
                  <text x="276" y="84">DHCP</text>
                  <text x="312" y="84">4o6</text>
                  <text x="52" y="100">Client</text>
                  <text x="216" y="100">Relay</text>
                  <text x="292" y="100">Server</text>
                  <text x="36" y="116">on</text>
                  <text x="64" y="116">CPE</text>
                  <text x="216" y="116">Agent</text>
                </g>
              </svg><a href="#section-3.2-14.1.1" class="pilcrow">Â¶</a>
</div>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-topology-path-preserved-4o6" class="selfRef">Topology path preserved 4o6 Relay Agent in DHCP server</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="deployment-considerations">
<section id="section-4">
      <h2 id="name-deployment-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-deployment-considerations" class="section-name selfRef">Deployment Considerations</a>
      </h2>
<p id="section-4-1">As clients are not aware of the presence of 4o6RA, the network deployment needs to ensure that
all DHCPv4 broadcast and unicast messages from clients are steered to a 4o6RA.
This can, e.g., be achieved by placing the 4o6RA in a central position that can observe all traffic
from the clients or use of address translation with the 4o6RA address for unicast
messages.<a href="#section-4-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="seccons">
<section id="section-5">
      <h2 id="name-security-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-5-1">This documents specifies the applicability of 4o6 DHCP in a scenario where legacy IPv4 clients are
connected to 4o6 DHCP Relay Agents that performs the encapsulation and decapsulation. This document
does not change anything else in the 4o6 DHCP specification and therefore the
security consideration of <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> still apply.<a href="#section-5-1" class="pilcrow">Â¶</a></p>
<p id="section-5-2">This mechanism differs from <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> as the DHCP client
sends and receives DHCPv4 messages, whereas in <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span> it
only sends DHCPv6 messages. This makes it possible that
DHCPv4 messages could reach a DHCPv4 server without using the 4o6RA.
While this can cause erroneous state in both clients and servers
and potentially even lead to misconfigurations that impact reachability,
this is not seen as a security concern rather than a deployment error.
Further, even though it may be used for attacks from within the network,
this is not new and it is not introduced because of this specification.<a href="#section-5-2" class="pilcrow">Â¶</a></p>
<p id="section-5-3">More generally, legacy IPv4 clients are not aware of this mechanism, however, even
when DHCP 4o6 is used, the client does not have any control about the
information provided by the Relay agent. As such this change does not
raise any additional security concerns.<a href="#section-5-3" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-6-1">This document has no IANA actions.<a href="#section-6-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="sec-combined-references">
<section id="section-7">
      <h2 id="name-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-7.1">
        <h3 id="name-normative-references">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3315">[RFC3315]</dt>
        <dd>
<span class="refAuthor">Droms, R., Ed.</span>, <span class="refAuthor">Bound, J.</span>, <span class="refAuthor">Volz, B.</span>, <span class="refAuthor">Lemon, T.</span>, <span class="refAuthor">Perkins, C.</span>, and <span class="refAuthor">M. Carney</span>, <span class="refTitle">"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"</span>, <span class="seriesInfo">RFC 3315</span>, <span class="seriesInfo">DOI 10.17487/RFC3315</span>, <time datetime="2003-07" class="refDate">July 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3315">https://www.rfc-editor.org/rfc/rfc3315</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6221">[RFC6221]</dt>
        <dd>
<span class="refAuthor">Miles, D., Ed.</span>, <span class="refAuthor">Ooghe, S.</span>, <span class="refAuthor">Dec, W.</span>, <span class="refAuthor">Krishnan, S.</span>, and <span class="refAuthor">A. Kavanagh</span>, <span class="refTitle">"Lightweight DHCPv6 Relay Agent"</span>, <span class="seriesInfo">RFC 6221</span>, <span class="seriesInfo">DOI 10.17487/RFC6221</span>, <time datetime="2011-05" class="refDate">May 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6221">https://www.rfc-editor.org/rfc/rfc6221</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7341">[RFC7341]</dt>
        <dd>
<span class="refAuthor">Sun, Q.</span>, <span class="refAuthor">Cui, Y.</span>, <span class="refAuthor">Siodelski, M.</span>, <span class="refAuthor">Krishnan, S.</span>, and <span class="refAuthor">I. Farrer</span>, <span class="refTitle">"DHCPv4-over-DHCPv6 (DHCP 4o6) Transport"</span>, <span class="seriesInfo">RFC 7341</span>, <span class="seriesInfo">DOI 10.17487/RFC7341</span>, <time datetime="2014-08" class="refDate">August 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7341">https://www.rfc-editor.org/rfc/rfc7341</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7969">[RFC7969]</dt>
        <dd>
<span class="refAuthor">Lemon, T.</span> and <span class="refAuthor">T. Mrugalski</span>, <span class="refTitle">"Customizing DHCP Configuration on the Basis of Network Topology"</span>, <span class="seriesInfo">RFC 7969</span>, <span class="seriesInfo">DOI 10.17487/RFC7969</span>, <time datetime="2016-10" class="refDate">October 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7969">https://www.rfc-editor.org/rfc/rfc7969</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8415">[RFC8415]</dt>
      <dd>
<span class="refAuthor">Mrugalski, T.</span>, <span class="refAuthor">Siodelski, M.</span>, <span class="refAuthor">Volz, B.</span>, <span class="refAuthor">Yourtchenko, A.</span>, <span class="refAuthor">Richardson, M.</span>, <span class="refAuthor">Jiang, S.</span>, <span class="refAuthor">Lemon, T.</span>, and <span class="refAuthor">T. Winters</span>, <span class="refTitle">"Dynamic Host Configuration Protocol for IPv6 (DHCPv6)"</span>, <span class="seriesInfo">RFC 8415</span>, <span class="seriesInfo">DOI 10.17487/RFC8415</span>, <time datetime="2018-11" class="refDate">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8415">https://www.rfc-editor.org/rfc/rfc8415</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-7.2">
        <h3 id="name-informative-references">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC0951">[RFC0951]</dt>
        <dd>
<span class="refAuthor">Croft, W.</span> and <span class="refAuthor">J. Gilmore</span>, <span class="refTitle">"Bootstrap Protocol"</span>, <span class="seriesInfo">RFC 951</span>, <span class="seriesInfo">DOI 10.17487/RFC0951</span>, <time datetime="1985-09" class="refDate">September 1985</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc951">https://www.rfc-editor.org/rfc/rfc951</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1542">[RFC1542]</dt>
        <dd>
<span class="refAuthor">Wimer, W.</span>, <span class="refTitle">"Clarifications and Extensions for the Bootstrap Protocol"</span>, <span class="seriesInfo">RFC 1542</span>, <span class="seriesInfo">DOI 10.17487/RFC1542</span>, <time datetime="1993-10" class="refDate">October 1993</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc1542">https://www.rfc-editor.org/rfc/rfc1542</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2131">[RFC2131]</dt>
        <dd>
<span class="refAuthor">Droms, R.</span>, <span class="refTitle">"Dynamic Host Configuration Protocol"</span>, <span class="seriesInfo">RFC 2131</span>, <span class="seriesInfo">DOI 10.17487/RFC2131</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2131">https://www.rfc-editor.org/rfc/rfc2131</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2132">[RFC2132]</dt>
      <dd>
<span class="refAuthor">Alexander, S.</span> and <span class="refAuthor">R. Droms</span>, <span class="refTitle">"DHCP Options and BOOTP Vendor Extensions"</span>, <span class="seriesInfo">RFC 2132</span>, <span class="seriesInfo">DOI 10.17487/RFC2132</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2132">https://www.rfc-editor.org/rfc/rfc2132</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="usecase">
<section id="appendix-A">
      <h2 id="name-example-use-case-topology-d">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-example-use-case-topology-d" class="section-name selfRef">Example Use Case: Topology Discovery for IPv4-only Radio Unit in the RAN Switched Fronthaul</a>
      </h2>
<p id="appendix-A-1">The Radio Fronthaul Network (FH) is built up with Radio Units (RU) and
Baseband Units (BB), each being an IP host.
Each RU is unique as it is tied to a set of antennas, and each antenna
is serving a specific Cell and Sector.
Each RU is configured by the BB depending on the Cell and Sectors it serves.
However, that dependency is only specified by the cabling between RU and antennas.<a href="#appendix-A-1" class="pilcrow">Â¶</a></p>
<p id="appendix-A-2">If BB is directly cabled to a set of RUs, the
BB can recognize the relationship between Russia and Cell/Sectors
based on the cabling between the RUs and antennas.<a href="#appendix-A-2" class="pilcrow">Â¶</a></p>
<p id="appendix-A-3">The introduction of a switched network between RUs and BBs has
added a level of complexity that requires the BBs to have a deeper
knowledge of the topology in order to properly configure the RUs,
involving knowledge all the cabling in the switched network.<a href="#appendix-A-3" class="pilcrow">Â¶</a></p>
<p id="appendix-A-4">Examples for switched networks are show in section 3 of <span>[<a href="#RFC7969" class="cite xref">RFC7969</a>]</span>
and demonstrate the different levels of complexity.
An example of a FH is depicted in <a href="#l2_switched_fh" class="auto internal xref">Figure 5</a>.<a href="#appendix-A-4" class="pilcrow">Â¶</a></p>
<span id="name-layer-2-switched-fronthaul-"></span><div id="l2_switched_fh">
<figure id="figure-5">
        <div id="appendix-A-5.1">
          <div class="alignCenter art-svg artwork" id="appendix-A-5.1.1">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="352" width="544" viewBox="0 0 544 352" class="diagram" text-anchor="middle" font-family="monospace" font-size="13px" stroke-linecap="round">
              <path d="M 8,32 L 8,80" fill="none" stroke="black"></path>
              <path d="M 8,112 L 8,160" fill="none" stroke="black"></path>
              <path d="M 8,192 L 8,240" fill="none" stroke="black"></path>
              <path d="M 8,272 L 8,320" fill="none" stroke="black"></path>
              <path d="M 80,32 L 80,80" fill="none" stroke="black"></path>
              <path d="M 80,112 L 80,160" fill="none" stroke="black"></path>
              <path d="M 80,192 L 80,240" fill="none" stroke="black"></path>
              <path d="M 80,272 L 80,320" fill="none" stroke="black"></path>
              <path d="M 152,48 L 152,144" fill="none" stroke="black"></path>
              <path d="M 152,208 L 152,304" fill="none" stroke="black"></path>
              <path d="M 168,48 L 168,80" fill="none" stroke="black"></path>
              <path d="M 168,208 L 168,240" fill="none" stroke="black"></path>
              <path d="M 224,48 L 224,144" fill="none" stroke="black"></path>
              <path d="M 224,208 L 224,304" fill="none" stroke="black"></path>
              <path d="M 272,48 L 272,320" fill="none" stroke="black"></path>
              <path d="M 296,64 L 296,144" fill="none" stroke="black"></path>
              <path d="M 296,224 L 296,304" fill="none" stroke="black"></path>
              <path d="M 336,64 L 336,96" fill="none" stroke="black"></path>
              <path d="M 392,64 L 392,144" fill="none" stroke="black"></path>
              <path d="M 392,224 L 392,304" fill="none" stroke="black"></path>
              <path d="M 432,48 L 432,320" fill="none" stroke="black"></path>
              <path d="M 456,144 L 456,224" fill="none" stroke="black"></path>
              <path d="M 536,144 L 536,224" fill="none" stroke="black"></path>
              <path d="M 8,32 L 80,32" fill="none" stroke="black"></path>
              <path d="M 152,48 L 224,48" fill="none" stroke="black"></path>
              <path d="M 80,64 L 144,64" fill="none" stroke="black"></path>
              <path d="M 296,64 L 392,64" fill="none" stroke="black"></path>
              <path d="M 8,80 L 80,80" fill="none" stroke="black"></path>
              <path d="M 168,80 L 224,80" fill="none" stroke="black"></path>
              <path d="M 272,96 L 288,96" fill="none" stroke="black"></path>
              <path d="M 336,96 L 392,96" fill="none" stroke="black"></path>
              <path d="M 8,112 L 80,112" fill="none" stroke="black"></path>
              <path d="M 80,128 L 144,128" fill="none" stroke="black"></path>
              <path d="M 224,128 L 264,128" fill="none" stroke="black"></path>
              <path d="M 392,128 L 424,128" fill="none" stroke="black"></path>
              <path d="M 152,144 L 224,144" fill="none" stroke="black"></path>
              <path d="M 296,144 L 392,144" fill="none" stroke="black"></path>
              <path d="M 456,144 L 536,144" fill="none" stroke="black"></path>
              <path d="M 8,160 L 80,160" fill="none" stroke="black"></path>
              <path d="M 432,176 L 448,176" fill="none" stroke="black"></path>
              <path d="M 8,192 L 80,192" fill="none" stroke="black"></path>
              <path d="M 152,208 L 224,208" fill="none" stroke="black"></path>
              <path d="M 80,224 L 144,224" fill="none" stroke="black"></path>
              <path d="M 296,224 L 392,224" fill="none" stroke="black"></path>
              <path d="M 456,224 L 536,224" fill="none" stroke="black"></path>
              <path d="M 8,240 L 80,240" fill="none" stroke="black"></path>
              <path d="M 168,240 L 224,240" fill="none" stroke="black"></path>
              <path d="M 272,256 L 288,256" fill="none" stroke="black"></path>
              <path d="M 8,272 L 80,272" fill="none" stroke="black"></path>
              <path d="M 80,288 L 144,288" fill="none" stroke="black"></path>
              <path d="M 224,288 L 264,288" fill="none" stroke="black"></path>
              <path d="M 392,288 L 424,288" fill="none" stroke="black"></path>
              <path d="M 152,304 L 224,304" fill="none" stroke="black"></path>
              <path d="M 296,304 L 392,304" fill="none" stroke="black"></path>
              <path d="M 8,320 L 80,320" fill="none" stroke="black"></path>
              <g class="text">
                <text x="40" y="52">RU1</text>
                <text x="132" y="52">P1</text>
                <text x="196" y="68">L2RA</text>
                <text x="364" y="84">L3RA</text>
                <text x="180" y="100">L2</text>
                <text x="132" y="116">P2</text>
                <text x="188" y="116">switch</text>
                <text x="40" y="132">RU2</text>
                <text x="180" y="132">#1</text>
                <text x="348" y="132">Router</text>
                <text x="484" y="180">DHCP</text>
                <text x="492" y="196">Server</text>
                <text x="40" y="212">RU3</text>
                <text x="132" y="212">P1</text>
                <text x="492" y="212">#1</text>
                <text x="196" y="228">L2RA</text>
                <text x="180" y="260">L2</text>
                <text x="340" y="260">Baseband</text>
                <text x="132" y="276">P2</text>
                <text x="188" y="276">switch</text>
                <text x="340" y="276">Unit</text>
                <text x="40" y="292">RU4</text>
                <text x="180" y="292">#2</text>
              </g>
            </svg><a href="#appendix-A-5.1.1" class="pilcrow">Â¶</a>
</div>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-layer-2-switched-fronthaul-" class="selfRef">Layer 2 Switched Fronthaul Example</a>
        </figcaption></figure>
</div>
<p id="appendix-A-6">Among the various alternatives, DHCP topology knowledge can be used
for solving the RU configuration problem when the FH is IPv6. Such solution
would use the topology discovery mechanisms described in section 3.2
of <span>[<a href="#RFC7969" class="cite xref">RFC7969</a>]</span>. The same mechanisms applies when RUs are connected via IPv4 and
implement 4o6 according to <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>.<a href="#appendix-A-6" class="pilcrow">Â¶</a></p>
<p id="appendix-A-7">In order to extend the solution described above also to the case where
RUs are using IPv4 but cannot support <span>[<a href="#RFC7341" class="cite xref">RFC7341</a>]</span>, it is possible to adopt
the mechanisms described in this document by introducing 4o6RA in
the switches.<a href="#appendix-A-7" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="acknowledgments">
<section id="appendix-B">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-B-1">The authors would also like to acknowledge interesting discussions in
this problem space with Sarah Gannon, Ines Ramadza and Siddharth Sharma.<a href="#appendix-B-1" class="pilcrow">Â¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Claudio Porfiri</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:claudio.porfiri@ericsson.com" class="email">claudio.porfiri@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Suresh Krishnan</span></div>
<div dir="auto" class="left"><span class="org">Cisco</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:suresh.krishnan@gmail.com" class="email">suresh.krishnan@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jari Arkko</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jari.arkko@ericsson.com" class="email">jari.arkko@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja KÃ¼hlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
